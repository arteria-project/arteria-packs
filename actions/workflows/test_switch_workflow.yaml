version: "2.0" # mistral version
name: arteria-packs.test_switch_workflow
description: Testing if it's possible to switch depending on input

workflows:
    main:
        type: direct
        tasks:
            switch:
              action: core.local
              input:
                cmd: echo '{test_list: ["a", "b", "c"]}'
              on-success:
                 - whoami: <% $.switch.stdout.contains(a) %>
                 - hostname: <% $.switch.stdout.contains(d) %>

            whoami:
                action: core.local
                input:
                    cmd: "whoami"

            hostname:
                action: core.local
                input:
                    cmd: "hostname"