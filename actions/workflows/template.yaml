version: "2.0" # mistral version
name: arteria-packs.template_workflow
description: The Arteria template workflow, echos a string

workflows:
    main:
        type: direct
        input:
            - host
            - echostring
        output:
            output_the_whole_workflow_context: <% $ %>

        tasks:
            call_echo_service:
              action: core.http
              input:               
                url: http://<% $.host %>:2424/api/1.0/echo/<% $.echostring %>
                method: "GET"
              on-success:
                - print_succes
              on-error:
                - print_failure

            print_success:
              action: core.local
              input:
                cmd: echo "Call returned <% $.call_echo_service.body.msg %>"

            print_failure:
              action: core.local
              input:
                cmd: echo "Something went wrong"
